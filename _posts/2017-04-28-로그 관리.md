---
layout: post
title: 로그 관리
categories: [study, hacking]
fullview: true
comments: true
---

시스템의 사용자가 로그인하여 명령을 내리는 과정에 대한 시스템의 동작을 Authentication, Authorization, Accounting으로 구분한다. 그리고 이 셋을 AAA라고 부르기도 한다.

- Authentication : 자신의 신원을 시스템에 증명하는 과정으로, 아이디와 패스워드를 입력하는 과정을 말한다. 아이디는 신원을 나타내며 패스워드가 정상이면 인증된다.
- Authorization : 올바른 패스워드를 입력해 시스템에 로그인이 허락된 사용자라고 판명되어 로그인되는 과정이다.
- Accounting : 시스템에 로그인한 후 시스템이 이에 대한 기록을 남기는 활동이다.

AAA는 모든 시스템에 존재한다. AAA 정보는 로그가 수행되는 대상으로 일반 운영체제뿐만 아니라 방화벽이나 침입 탐지 시스템과 같이 로그를 남기는 모든 시스템에 존재한다. 따라서 어떤 정보를 로그로 남길지 AAA 개념에 따라 판단하면 된다.

AAA에 대한 로그 정보는 해커나 시스템에 접근한 악의적인 사용자를 추적하는 데 많은 도움이 된다. 이때 추적에 대한 기록의 충실도를 책임 추적성이라 하는데 책임 추적성이 높은 시스템일수록 로그가 충실하게 남아 있다고 생각할 수 있다. 책임 추적성은 시스템에만 해당되는 얘기는 아니다. 이 외에 감사 추적은 Accounting을 하여 남긴 로그 정보를 통한 추적 그 자체를 말한다.

# 운영체제의 로그 관리
윈도우와 유닉스는 상당히 다른 로그 체계를 가지고 있다. 윈도우는 이벤트(Event)라고 불리는 중앙에 집중화된 형태로 로그를 수집하여 저장하지만, 유닉스는 로그를 여러 곳에 산발적으로 저장한다. 따라서 중앙 집중화된 윈도우의 로그는 로그 관리가 편하지만, 공격자가 한 로그만 삭제하면 되므로 위험이 크다. 또한 로그에 대한 보안 수준도 낮은 편이다.

이에 반해 유닉스 로그는 초보자에게는 찾는 것조차도 쉽지 않고 공격자도 로그를 모두 찾아서 삭제하기가 쉽지 않다.

# 데이터베이스의 로그 관리
데이터베이스의 경우 서비스 특성상 많은 데이터 요청이 매우 빈번하게 발생하여 일반적으로 로그인 이외에는 데이터베이스 접근 및 데이터 처리 로그를 남기지 않는다. 그러나 데이터베이스에 대한 접근 및 데이터 처리 로그는 데이터 유출과 직접적으로 관련이 있기 때문에 시스템 성능과 관련하여 수용할 수 있는 범위 내에서 적절하게 로깅 정책을 적용 해야 한다.

# 응용 프로그램의 로그 관리
응용 프로그램 중에 보안과 관련되어 가장 중요도가 높은 것은 웹 서버와 FTP 서버이다.

많은 침해 사고가 웹 해킹을 통해 발생하고 내부 네트워크 침투를 위한 경로, 웹 서비스 및 개인정보 유출 등 다양한 형태로 발생하고 있어 그에 따른 로그 분석이 매우 중요하다. 하지만 웹 서버의 로그 분석은 웹 해킹이 일어나는 원리를 이해하지 못하면 로그 분석 자체가 어렵다.

따라서 웹 서버 로그를 분석하기 위해서는 반드시 웹 해킹에 대한 상세한 지식의 획득이 선행되어야 한다. 실제로 웹 취약점 분석을 통해 어떤 형태의 로그가 남는지 확인해보는 것도 웹 서버 로그 분석 능력을 높이는 좋은 방법이다.

# 네트워크 장비의 로그 관리
네트워크의 경우 일반적으로 대량의 트래픽이 생성되고, 대부분의 트래픽이 일시적으로 존재했다가 사라지기 때문에 살펴볼 수 있는 로그가 다양하지는 않다. 네트워크와 관련한 다양한 시스템을 구비해놓을 경우 살펴볼 수 있는 로그는 크게 3가지이다.

- 네트워크 보안 시스템의 로그
침입 시스템, 침입 탐지 시스템, 침입 방지 시스템 등 다양한 보안 시스템의 로그를 확인할 수 있다. 이러한 다양한 보안 시스템의 로그는 통합로그관리시스템에 의해 수집되고 관리되기도 한다.

- 네트워크 관리 시스템의 로그
네트워크 트래픽 모니터링 시스템과 네트워크 관리 시스템의 로그를 참고할 수 있다.

- 네트워크 장비 인증 시스템의 로그
대규모 내트워크 장비를 운영하는 곳에서는 라우터나 스위치의 인증을 일원화 하기 위해 인증 서버로 TACACS+를 사용하기도 한다. 이 인증 서버를 통해 네트워크 장비에 대한 인증 시도 및 로그인 정보 등을 확인할 수 있다.

라우터나 스위치 같은 네트워크 장비에는 로그를 남기는 기능이 있다. 그러나 대부분의 네트워크 장비 자체에는 하드 디스그와 같은 저장 공간이 없어 로그를 남기지 않은 채로 운영된다.

각 네트워크 장비에서 생성되는 로그는 네트워크를 통해 로그 서버에 전송된다. 이러한 로그 서버의 운영은 네트워크 장비에 대한 로그를 남길 수 있게 해주는 것 외에도 다른 장점이 있다. 바로 공격자가 로그를 삭제하기 위해서는 로그 서버의 위치를 찾아야 하고, 이 로그 서버에 대한 해킹도 성공해야 한다는 점이다.

즉 해커가 어떤 네트워크 장비에 침투하더라도 자신의 흔적을 지우기는 쉽지 않다. 이런 로그 서버의 장점 때문에 네트워크 장비뿐만 아니라 운영체제 등도 로그 서버를 따로 운영하기도 한다.
