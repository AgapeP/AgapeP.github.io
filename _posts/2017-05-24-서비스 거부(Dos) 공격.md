---
layout: post
title: 서비스 거부(Dos) 공격
categories: [study, hacking]
fullview: true
comments: true
---

서비스 거부 공격(DoS: Denial of Service)은 다른 해킹에 비해 비교적 간단한데, 쉽게 얘기하면 일종의 훼방이라고 볼 수 있다. 서버나 네트워크에서의 서비스 공격은ㅇ 무척 다양하다.

1. 취약점 공격형
취약점 공격은 공격 대상이 특정 형태의 오류가 있는 네트워크 패킷의 처리 로직에 문제가 있을 때, 그 문제를 이용하여 공격 대상의 오작동을 유발시키는 형태의 공격이다.

**Boink, Bonk, TearDrop 공격**
Boink(보잉크), Bonk(봉크), TearDrop(테어드랍)과 같은 공격은 오류 제어 로직을 악용하여 시스템의 자원을 고갈시키는 공격이다. TCP 프로토콜은 데이터 전달의 유효성이나 효율성을 위해 시퀸스 넘버 기반의 오류 제어 방식을 사용하여 특정 연결의 유효성을 제어한다. TCP는 신뢰성 있는 연결을 위해 다음의 기능을 제공한다.
- 패킷의 순서가 올바른지 확인
- 중간에 손실된 패킷은 없는지 확인
- 손실된 패킷의 재전송 요구
따라서 프로토콜은 이러한 사항이 확인되지 않은 데이터 전송에 대해 신뢰도를 확보하기 위해 반복적인 재요청과 수정을 하게 된다. Boink, Bonk, TearDrop은 모두 이러한 반복적인 재요청과 수정을 공격 대상이 계속하게 함으로써 시스템의 자원을 고갈시키는 공격이다. TCP 패킷 안에는 각 패킷이 데이터의 어느 부분을 포함하고 있는지를 표시하기 위하여 시퀸스 넘버가 기록되는데, 이러한 공격들은 시스템의 패킷 재전송과 재조합(Reassembling)에 과부하가 걸리도록 이 시퀸스 넘버를 속인다.

**Land 공격**
Land 공격은 시스템을 나쁜 상태에 빠지게 하는 것이며, 그 방법도 아주 간단하다. 패킷을 전송할 때 출발지 IP 주소와 목적지 IP 주소값을 똑같이 만들어서 공격 대상에게 보내는 것이다. 물론 이때 조작된 IP 주소값은 공격 대상의 IP 주소여야 한다.

2. 자원 고갈 공격형
자원 고갈 공격형은 네트워크 대역폭이나 시스템의 CPU, 세션 등의 자원을 소모시키는 형태의 공격이다.

**Ping of Death 공격**
Ping of Death 공격은 NetBIOS 해킹과 함꼐 시스템을 파괴하는 데 가장 흔하게 쓰였던 초기의 DoS 공격으로, '죽음의 핑 날리기'라고도 한다. 이메일로 10MB 파일을 보낼 때, 10MB 크기의 데이터 패킷 하나가 가는 것이 아니고, 수천 개의 패킷으로 나뉘어 전송되는 것처럼 네트워크에서도 패킷을 전송하기 적당한 크기로 잘라서 보내는데 바로 이런 특성을 이용한 것이다.
네트워크 연결 상태를 점검하기 위한 ping 명령을 보낼 떄, 패킷을 최대한 길게 해 공격 대상에게 보내면 패킷은 지나가는 네트워크의 늑성에 따라 수백 개에서 수천 개의 패킷으로 잘게 쪼개지게 된다. 네트워크의 특성상 한 번 나뉜 패킷이 다시 합쳐서 전송되는 일은 거의 없다. 따라서 결과적으로 공격 대상 시스템은 대량의 작은 패킷을 수신하게 되고, 네트워크는 마비된다. 이러한 공격 방식은 아직도 유효하게 사용된다.

**SYN Flooding 공격**
네트워크에서 서비스를 제공하는 시스템에는 동시 사용자 수의 제한이 있다. 이 웹 서버의 동시 사용자는 200명이다 라고 정해져 있는 식이다. 물론 사용자 수를 변경할 수는 있지만 무한하게 늘릴 수는 없다. 이처럼 SYN Flooding 공격은 존재하지 않는 클라이언트가 서버별로 한정되어 있는 접속 공간에 접속한 것처럼 속여, 다른 사용자가 서버의 서비스를 제공받지 못하게 하는 것이다.

**Smurf 공격**
Smurf(스머프) 공격은 ICMP 패킷과 네트워크에 존재하는 임의의 시스템들을 이용하여 패킷을 확장시켜서 서비스 공격을 수행하는 방법으로, 네트워크를 공격할 때 많이 사용된다.

3. 분산 서비스 거부(DDoS) 공격
분산 서비스 거부(DDoS: Distributed Denial of Service) 공격은 공격자가 한 지점에서 서비스 거부 공격을 수행하는 형태를 넘어 광범위한 네트워크를 이용하여 다수의 공격 지점에서 동시에 한 곳을 공격하도록 하는 형태의 서비스 거부 공격이다.

분산 서비스 거부 공격은 기본적으로 다음과 같은 구성을 가진다.
- 공격자: 공격을 주도하는 해커의 컴퓨터
- 마스터: 공격자에게 직접 명령을 받는 시스템으로 여러 대의 에이전트를 관리함
- 핸들러 프로그램: 마스터 시스템의 역할을 수행하는 프로그램
- 에이전트: 공격 대상에 직접 공격을 가하는 시스템
- 데몬 프로그램: 에이전트 시스템의 역활을 수행하는 프로그램

최근에 발생하는 DDoS 공격은 악성코드와 결합하는 형태로 이뤄진다.
- PC에서 전파가 가능한 형태의 악성코드를 작성한다.
- DDoS 공격을 위해 사전에 공격 대상과 스케줄을 정한 뒤 이를 작성한 악성 코드에 코딩한다.
- 악성코드가 인터넷을 통해 전파되도록 한다. 전파 과정에서는 별다른 공격이 이뤄지지 않도록 잠복한다. 이렇게 악성코드에 감염된 PC를 좀비 PC라고 부르며, 좀비 PC끼리 형성된 네트워크를 '봇넷(Botnet)'이라고 부른다.
- 공격자가 명령을 내리거나 정해진 공격 스케줄에 따라 봇넷으로 형성된 좀비 PC들이 일제히 공격 명령을 수행하여 대규모 분산 서비스 공격이 가능해진다.
